{"version":3,"sources":["webpack:///js/app.67ddc83f02c2d687ed08.js","webpack:///./src/main.js","webpack:///./src/config.js","webpack:///./src/utils/notifications.js","webpack:///Service.vue","webpack:///Services.vue","webpack:///./src/components/Service.vue","webpack:///./src/components/Services.vue","webpack:///./src/components/Services.vue?efbc","webpack:///./src/components/Service.vue?69c9"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_Services","_Services2","_notifications","requestNotificationPermission","el","template","components","Services","Object","defineProperty","value","API_HOST","SERVICES_REFRESH_INTERVAL","STATUS_DESCRIPTION","ok","minor","major","critical","maintenance","unavailable","STATUS_COLOR","STATUS_ICON","isNotificationSupported","window","Notification","requestPermission","spawnNotification","title","options","_interopRequireWildcard","newObj","key","prototype","hasOwnProperty","call","_config","config","name","props","data","color","this","service","status","icon","description","methods","goToStatusPage","location","status_url","notifyStatusChanges","oldServices","newServices","$","each","i","oldService","newService","notifyStatusChange","msg","newStatus","_Service","_Service2","Service","services","last_update","created","fetchServices","setInterval","bind","increaseLastUpdate","self","get","sort","a","b","toLowerCase","console","log","__vue_exports__","__vue_options__","__vue_template__","render","staticRenderFns","_h","staticClass","attrs","id","_l","_s","on","click","class","src","icon_url","href"],"mappings":"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","file":"js/app.67ddc83f02c2d687ed08.js","sourcesContent":["webpackJsonp([1,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(9);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _Services = __webpack_require__(6);\n\t\n\tvar _Services2 = _interopRequireDefault(_Services);\n\t\n\tvar _notifications = __webpack_require__(2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t(0, _notifications.requestNotificationPermission)();\n\t\n\tnew _vue2.default({\n\t  el: '#services',\n\t  template: '<Services/>',\n\t  components: { Services: _Services2.default }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar API_HOST = exports.API_HOST = 'http://localhost:8000';\n\tvar SERVICES_REFRESH_INTERVAL = exports.SERVICES_REFRESH_INTERVAL = 30;\n\t\n\tvar STATUS_DESCRIPTION = exports.STATUS_DESCRIPTION = {\n\t  ok: 'Operational',\n\t  minor: 'Degraded Performance',\n\t  major: 'Partial Outage',\n\t  critical: 'Major Outage',\n\t  maintenance: 'Maintenance',\n\t  unavailable: 'Status Unavailable'\n\t};\n\t\n\tvar STATUS_COLOR = exports.STATUS_COLOR = {\n\t  ok: 'green',\n\t  minor: 'yellow',\n\t  major: 'orange',\n\t  critical: 'red',\n\t  maintenance: 'blue',\n\t  unavailable: 'gray'\n\t};\n\t\n\tvar STATUS_ICON = exports.STATUS_ICON = {\n\t  ok: 'fa-check',\n\t  minor: 'fa-minus-square',\n\t  major: 'fa-exclamation-triangle',\n\t  critical: 'fa-times',\n\t  maintenance: 'fa-wrench',\n\t  unavailable: 'fa-question'\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.requestNotificationPermission = requestNotificationPermission;\n\texports.spawnNotification = spawnNotification;\n\tfunction isNotificationSupported() {\n\t  return \"Notification\" in window;\n\t}\n\t\n\tfunction requestNotificationPermission() {\n\t  if (!isNotificationSupported()) {\n\t    return;\n\t  }\n\t  Notification.requestPermission();\n\t}\n\t\n\tfunction spawnNotification(title, options) {\n\t  if (!isNotificationSupported()) {\n\t    return;\n\t  }\n\t  return new Notification(title, options);\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\tvar config = _interopRequireWildcard(_config);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\texports.default = {\n\t  name: 'service',\n\t  props: ['service'],\n\t  data: function data() {\n\t    return {\n\t      color: config.STATUS_COLOR[this.service.status],\n\t      icon: config.STATUS_ICON[this.service.status],\n\t      description: config.STATUS_DESCRIPTION[this.service.status]\n\t    };\n\t  },\n\t  methods: {\n\t    goToStatusPage: function goToStatusPage() {\n\t      window.location = this.service.status_url;\n\t      return false;\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\tvar config = _interopRequireWildcard(_config);\n\t\n\tvar _notifications = __webpack_require__(2);\n\t\n\tvar _Service = __webpack_require__(5);\n\t\n\tvar _Service2 = _interopRequireDefault(_Service);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction notifyStatusChanges(oldServices, newServices) {\n\t  $.each(oldServices, function (i, oldService) {\n\t    var newService = newServices[i];\n\t    if (!oldService || oldService.name != newService.name || newService.status == oldService.status) {\n\t      return;\n\t    }\n\t    notifyStatusChange(newService.name, newService.icon, newService.description);\n\t    var options = {\n\t      icon: icon\n\t    };\n\t    var msg = name + '\\'s new status is \"' + newStatus + '\"';\n\t    (0, _notifications.spawnNotification)(msg, options);\n\t  });\n\t}\n\t\n\texports.default = {\n\t  name: 'services',\n\t  components: {\n\t    Service: _Service2.default\n\t  },\n\t\n\t  data: function data() {\n\t    return {\n\t      services: [],\n\t      last_update: null\n\t    };\n\t  },\n\t\n\t  created: function _ready() {\n\t    this.fetchServices();\n\t    setInterval(this.fetchServices.bind(this), config.SERVICES_REFRESH_INTERVAL * 1000);\n\t    setInterval(this.increaseLastUpdate.bind(this), 1000);\n\t  },\n\t\n\t  methods: {\n\t\n\t    fetchServices: function _fetchServices() {\n\t      var self = this;\n\t      $.get(config.API_HOST + '/status', function (data) {\n\t        var services = data.data.services;\n\t\n\t        services = services.sort(function (a, b) {\n\t          return a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1;\n\t        });\n\t        notifyStatusChanges(self.services, data.data.services);\n\t        self.services = data.data.services;\n\t        self.last_update = data.data.last_update;\n\t      });\n\t    },\n\t\n\t    increaseLastUpdate: function increaseLastUpdate() {\n\t      console.log('increaseLastUpdate');\n\t      if (this.last_update === null) {\n\t        return;\n\t      }\n\t      this.last_update += 1;\n\t    }\n\t\n\t  }\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(3)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(8)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(4)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(7)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){with(this) {\n\t  return _h('div', [_h('div', {\n\t    staticClass: \"services-container one-column\",\n\t    attrs: {\n\t      \"id\": \"services\"\n\t    }\n\t  }, [_l((services), function(service) {\n\t    return _h('service', {\n\t      attrs: {\n\t        \"service\": service\n\t      }\n\t    })\n\t  })]), \" \", _h('div', {\n\t    staticClass: \"last-update\"\n\t  }, [\"\\n      Last update: \", _h('span', {\n\t    staticClass: \"last-update-seconds\"\n\t  }, [_s(last_update)]), \" seconds ago\\n    \"])])\n\t}},staticRenderFns: []}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){with(this) {\n\t  return _h('div', {\n\t    staticClass: \"service-row\"\n\t  }, [_h('div', {\n\t    staticClass: \"service-container border-color\",\n\t    on: {\n\t      \"click\": goToStatusPage\n\t    }\n\t  }, [_h('div', {\n\t    staticClass: \"service-inner-container\",\n\t    class: 'status-' + color\n\t  }, [_h('img', {\n\t    staticClass: \"service-icon\",\n\t    attrs: {\n\t      \"src\": service.icon_url,\n\t      \"title\": service.name\n\t    }\n\t  }), \" \", _h('span', {\n\t    staticClass: \"service-name\"\n\t  }, [_s(service.name)]), \" \", _h('span', {\n\t    staticClass: \"icon-indicator fa\",\n\t    class: icon\n\t  }), \" \", _h('span', {\n\t    staticClass: \"service-status hidden-xxs\"\n\t  }, [_h('a', {\n\t    attrs: {\n\t      \"href\": service.status_url\n\t    }\n\t  }, [_s(description)])])])])])\n\t}},staticRenderFns: []}\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// js/app.67ddc83f02c2d687ed08.js","import Vue from 'vue';\nimport Services from './components/Services';\nimport {requestNotificationPermission} from './utils/notifications';\n\n/* eslint-disable no-new */\n\nrequestNotificationPermission();\n\nnew Vue({\n  el: '#services',\n  template: '<Services/>',\n  components: { Services },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export var API_HOST = 'http://localhost:8000';\nexport var SERVICES_REFRESH_INTERVAL = 30;\n\nexport var STATUS_DESCRIPTION = {\n  ok: 'Operational',\n  minor: 'Degraded Performance',\n  major: 'Partial Outage',\n  critical: 'Major Outage',\n  maintenance: 'Maintenance',\n  unavailable: 'Status Unavailable',\n};\n\nexport var STATUS_COLOR = {\n  ok: 'green',\n  minor: 'yellow',\n  major: 'orange',\n  critical: 'red',\n  maintenance: 'blue',\n  unavailable: 'gray',\n};\n\nexport var STATUS_ICON = {\n  ok: 'fa-check',\n  minor: 'fa-minus-square',\n  major: 'fa-exclamation-triangle',\n  critical: 'fa-times',\n  maintenance: 'fa-wrench',\n  unavailable: 'fa-question',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","function isNotificationSupported() {\n  return (\"Notification\" in window);\n}\n\nexport function requestNotificationPermission() {\n  if (!isNotificationSupported()) {\n    return;\n  }\n  Notification.requestPermission();\n}\n\nexport function spawnNotification(title, options) {\n  if (!isNotificationSupported()) {\n    return;\n  }\n  return new Notification(title, options);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/notifications.js","<template>\n  <div class=\"service-row\">\n    <div class=\"service-container border-color\" v-on:click=\"goToStatusPage\">\n      <div class=\"service-inner-container\" :class=\"'status-' + color\">\n        <img class=\"service-icon\" :src=\"service.icon_url\" :title=\"service.name\"/>\n        <span class=\"service-name\">{{service.name}}</span>\n        <span class=\"icon-indicator fa\" :class=\"icon\"></span>\n        <span class=\"service-status hidden-xxs\"><a :href=\"service.status_url\">{{description}}</a></span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as config from '../config';\n\nexport default {\n  name: 'service',\n  props: ['service'],\n  data: function() {\n    return {\n      color: config.STATUS_COLOR[this.service.status],\n      icon: config.STATUS_ICON[this.service.status],\n      description: config.STATUS_DESCRIPTION[this.service.status],\n    };\n  },\n  methods: {\n    goToStatusPage: function() {\n      window.location = this.service.status_url;\n      return false;\n    },\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Service.vue?1483231b","<template>\n  <div>\n      <div class=\"services-container one-column\" id=\"services\">\n        <service v-for=\"service in services\" :service=\"service\"></service>\n      </div>\n      <div class=\"last-update\">\n        Last update: <span class=\"last-update-seconds\">{{last_update}}</span> seconds ago\n      </div>\n  </div>\n</template>\n\n<script>\nimport * as config from '../config';\nimport {spawnNotification} from '../utils/notifications';\nimport Service from './Service';\n\nfunction notifyStatusChanges(oldServices, newServices) {\n  $.each(oldServices, function(i, oldService) {\n    var newService = newServices[i];\n    if (!oldService\n          || oldService.name != newService.name\n          || newService.status == oldService.status) {\n      return;\n    }\n    notifyStatusChange(newService.name, newService.icon, newService.description)\n    var options = {\n      icon: icon\n    };\n    var msg = name + '\\'s new status is \"' + newStatus + '\"';\n    spawnNotification(msg, options);\n  });\n}\n\nexport default {\n  name: 'services',\n  components: {\n    Service,\n  },\n\n  data: function() {\n    return  {\n      services: [],\n      last_update: null,\n    };\n  },\n\n  created: function _ready(){\n    this.fetchServices();\n    setInterval(this.fetchServices.bind(this), config.SERVICES_REFRESH_INTERVAL * 1000);\n    setInterval(this.increaseLastUpdate.bind(this), 1000);\n  },\n\n  methods: {\n\n    fetchServices: function _fetchServices(){\n      var self = this;\n      $.get(config.API_HOST + '/status', function(data) {\n        var services = data.data.services;\n        // sort services\n        services = services.sort((a,b) => (a.name.toLowerCase() > b.name.toLowerCase()) ? 1 : -1);\n        notifyStatusChanges(self.services, data.data.services);\n        self.services = data.data.services;\n        self.last_update = data.data.last_update;\n      });\n    },\n\n    increaseLastUpdate: function() {\nconsole.log('increaseLastUpdate')\n      if (this.last_update === null) {\n        return;\n      }\n      this.last_update += 1;\n    },\n\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Services.vue?57dbcd39","var __vue_exports__, __vue_options__\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Service.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-5e278a96!vue-loader/lib/selector?type=template&index=0!./Service.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Service.vue\n// module id = 5\n// module chunks = 1","var __vue_exports__, __vue_options__\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Services.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-5046bd0e!vue-loader/lib/selector?type=template&index=0!./Services.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Services.vue\n// module id = 6\n// module chunks = 1","module.exports={render:function (){with(this) {\n  return _h('div', [_h('div', {\n    staticClass: \"services-container one-column\",\n    attrs: {\n      \"id\": \"services\"\n    }\n  }, [_l((services), function(service) {\n    return _h('service', {\n      attrs: {\n        \"service\": service\n      }\n    })\n  })]), \" \", _h('div', {\n    staticClass: \"last-update\"\n  }, [\"\\n      Last update: \", _h('span', {\n    staticClass: \"last-update-seconds\"\n  }, [_s(last_update)]), \" seconds ago\\n    \"])])\n}},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-5046bd0e!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Services.vue\n// module id = 7\n// module chunks = 1","module.exports={render:function (){with(this) {\n  return _h('div', {\n    staticClass: \"service-row\"\n  }, [_h('div', {\n    staticClass: \"service-container border-color\",\n    on: {\n      \"click\": goToStatusPage\n    }\n  }, [_h('div', {\n    staticClass: \"service-inner-container\",\n    class: 'status-' + color\n  }, [_h('img', {\n    staticClass: \"service-icon\",\n    attrs: {\n      \"src\": service.icon_url,\n      \"title\": service.name\n    }\n  }), \" \", _h('span', {\n    staticClass: \"service-name\"\n  }, [_s(service.name)]), \" \", _h('span', {\n    staticClass: \"icon-indicator fa\",\n    class: icon\n  }), \" \", _h('span', {\n    staticClass: \"service-status hidden-xxs\"\n  }, [_h('a', {\n    attrs: {\n      \"href\": service.status_url\n    }\n  }, [_s(description)])])])])])\n}},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-5e278a96!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Service.vue\n// module id = 8\n// module chunks = 1"],"sourceRoot":""}